# MiniAuto 小车控制器

Flutter开发的Android蓝牙控制应用,用于控制miniAuto麦克纳姆轮小车。

## 功能特性

- 🔵 蓝牙设备扫描和连接
- 🎮 按钮控制(前进/后退/左转/右转/停止)
- 📡 实时连接状态显示
- 🔒 自动权限请求

## 通信协议

发送到小车的数据格式:
```
0x55 0x55 0x04 0x32 motor1 motor2
```

- 帧头: `0x55 0x55`
- 长度: `0x04`
- 功能号: `0x32`
- motor1/motor2: `-100` 到 `100`

## 控制指令

| 动作 | motor1 | motor2 |
|------|--------|--------|
| 前进 | 100 | 100 |
| 后退 | -100 | -100 |
| 左转 | -100 | 100 |
| 右转 | 100 | -100 |
| 停止 | 0 | 0 |

## 使用方法

1. 确保小车蓝牙模块已配对
2. 打开应用,点击扫描按钮
3. 选择小车设备进行连接
4. 使用按钮控制小车运动
5. 按下按钮时小车运动,松开自动停止

## 开发环境

- Flutter SDK 3.0+
- Android SDK 21+
- Dart 3.0+

## 依赖库

- `flutter_bluetooth_serial`: 蓝牙通信
- `permission_handler`: 权限管理

## 编译运行

```bash
# 进入项目目录
cd miniauto_controller

# 获取依赖
flutter pub get

# 运行应用
flutter run

# 构建APK
flutter build apk --release
```

## 项目结构

```
lib/
├── main.dart              # 主界面和应用入口
└── bluetooth_service.dart # 蓝牙通信服务
```

## 注意事项

1. Android 12+需要新的蓝牙权限
2. 首次运行需要授予蓝牙和位置权限
3. 确保小车已配对后再扫描
4. 按钮采用按下发送/松开停止的设计

## 后续扩展

- [ ] 添加虚拟摇杆控制
- [ ] 添加速度调节功能
- [ ] 添加陀螺仪控制模式
- [ ] 记住上次连接的设备
- [ ] 添加连接状态监听

## 许可证

本项目用于学习和研究目的。
